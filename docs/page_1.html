<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Дополнительный файл конфигурации</TITLE>
<META content="text/html; charset=Windows-1251" http-equiv=Content-Type><LINK 
rel=stylesheet type=text/css href="misc/styles.css">
<META name=GENERATOR content="MSHTML 8.00.6001.23590"></HEAD>
<BODY>
<H2>Дополнительный файл конфигурации</H2>
<P>Модуль, кроме основного файла конфигурации, поддерживает дополнительный файл 
конфигурации, который должен быть расположен в корне архива и должен называться 
*.sfx.config или *.sfx.config.*, где вместо звездочки может быть любое имя. Основной файл 
конфигурации, пусть даже пустой, всё равно должен присутствовать, т.к. именно 
его сигнатуры служат маркером что "это SFX архив" </P>
<P><FONT color=#a82323><B>Последовательность загрузки файлов конфигурации и 
обработка их модулем</B></FONT></P>
<P>После запуска SFX архива начинается формирование рабочего файла конфигурации. 
Рабочий - это тот, который и будет выполнен при данном конкретном запуске с 
учетом наличия основного и дополнительного файлов конфигурации, языка и 
разрядности системы. </P>
<P>&nbsp;</P>
<P>Загрузка происходит так: </P>
<P>1. Сначала в рабочий файл конфигурации загружается основной файл конфигурации 
</P>
<P>2. Парсится и применяется командная строка, модифицируется рабочий файл 
конфигурации </P>
<P>3. Открывается архив и в его корне ищется дополнительный файл конфигурации 
*.sfx.config (*.sfx.config.*)</P>
<P>4. Если дополнительный файл конфигурации *.sfx.config (*.sfx.config.*) найден, то весь рабочий 
файл конфигурации сбрасывается </P>
<P>5. Снова в рабочий файл конфигурации загружается основной файл конфигурации 
</P>
<P>6. Дополнительный файл конфигурации ПОДГРУЖАЕТСЯ к рабочему файлу 
конфигурации </P>
<P>7.Заново парсится и применяется командная строка, модифицируется рабочий файл 
конфигурации </P>
<P>8. После завершения загрузки, созданный рабочий файл конфигурации 
обрабатывается. </P>
<P>Параметры обрабатываются (переопределяются/добавляются) в том порядке, в 
котором они были загружены и в котором они стояли в файлах конфигурации. </P>
<P>Если параметр НЕ множественный, то используется последнее значение. Например, 
если 'Title' указан в обоих файлах конфигурации, будет использован тот, который 
определен в дополнительном файл конфигурации. </P>
<P>Если параметр множественный, то он просто добавляется в список. </P>
<P>Если необходимо ПОЛНОСТЬЮ переопределить какой-то множественный параметр, 
можно обнулить список этого параметра (т.е. удалить все предыдущие), указав в 
нем знак, минус (-), например: </P><PRE class=pre40>RunProgram=-</PRE>
<P>Хотя файлов *.sfx.config (*.sfx.config.*) может быть сколько угодно, не рекомендуется 
увлекаться их разбиением, т.к. порядок их загрузки зависит от их очередности в 
архиве и может быть непредсказуем, что в свою очередь может повлиять на 
переопределение параметров. Для повседневных нужд достаточно разбивать на 
"платформа", "язык", "платформа/язык", т.е., чтобы каждый файл был со своей 
сигнатурой, чтобы сигнатуры не повторялись.</P></BODY></HTML>
